<!doctype html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <div></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
  <script src="elm.js"></script>
  <script>

    var app = Elm.Main.fullscreen()

    app.ports.connectAsHost.subscribe(isHost => {

      var socket = io.connect('http://localhost:5000')
    
      if (isHost) {

        socket.on('request-all-topping-counts', function (data) {
          app.ports.receiveRequestForAllToppingCounts.send(data)
        })

        app.ports.sendAllToppingCounts.subscribe(data => {
          socket.emit('send-all-topping-counts', data)
        })
      }

      socket.on('topping-triplet', data => {
        app.ports.receiveToppingTriplet.send(data)
      })

      app.ports.sendToppingTriplet.subscribe(data => {
        socket.emit('topping-triplet', data)
      })

      
    })

    

  </script>
</body>
