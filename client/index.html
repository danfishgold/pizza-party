<!doctype html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <div></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
  <script src="elm.js"></script>
  <script>

    var app = Elm.Main.fullscreen()

    
    var socket = io.connect('http://localhost:5000')
    
    app.ports.connectAsHost.subscribe(data => {
      socket.emit('connect-as-host', data)
    })
    app.ports.sendTriplet.subscribe(data => {
      socket.emit('triplet', data)
    })
    app.ports.requestToppingList.subscribe(data => {
      socket.emit('request-topping-list', data)
    })
    app.ports.sendToppingList.subscribe(data => {
      socket.emit('topping-list', data)
    })

    socket.on('connect-as-host-response', data => {
      app.ports.connectAsHostResponse.send(data)
    })
    socket.on('triplet', data => {
      app.ports.receiveTriplet.send(data)
    })
    socket.on('request-topping-list', data => {
      console.log('hey')
      app.ports.receiveToppingListRequest.send(data)
    })
    socket.on('topping-list', data => {
      app.ports.receiveToppingList.send(data)
    })
    
  </script>
</body>
